<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007ba5; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #007ba5; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #007ba5; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #5e5e5e; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>


  <!--radix_placeholder_meta_tags-->
  <title>R con R: Manipulación de data con Tidyverse</title>

  <meta property="description" itemprop="description" content="En esta sección vamos a aprender a manipular data con los paquetes de tidyverse."/>


  <!--  https://schema.org/Article -->
  <meta property="article:published" itemprop="datePublished" content="2022-05-10"/>
  <meta property="article:created" itemprop="dateCreated" content="2022-05-10"/>
  <meta name="article:author" content="Maria Pia van Oordt"/>

  <!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
  <meta property="og:title" content="R con R: Manipulación de data con Tidyverse"/>
  <meta property="og:type" content="article"/>
  <meta property="og:description" content="En esta sección vamos a aprender a manipular data con los paquetes de tidyverse."/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:site_name" content="R con R"/>

  <!--  https://dev.twitter.com/cards/types/summary -->
  <meta property="twitter:card" content="summary"/>
  <meta property="twitter:title" content="R con R: Manipulación de data con Tidyverse"/>
  <meta property="twitter:description" content="En esta sección vamos a aprender a manipular data con los paquetes de tidyverse."/>

  <!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

  <script type="text/json" id="radix-rmarkdown-metadata">
  {"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","author","date","output"]}},"value":[{"type":"character","attributes":{},"value":["Manipulación de data con Tidyverse"]},{"type":"character","attributes":{},"value":["En esta sección vamos a aprender a manipular data con los paquetes de tidyverse.\n"]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","url","affiliation","affiliation_url"]}},"value":[{"type":"character","attributes":{},"value":["Maria Pia van Oordt"]},{"type":"character","attributes":{},"value":["https://www.linkedin.com/in/maria-pia-van-oordt-van-oordt-l%C3%B3pez-9a17a6233/"]},{"type":"character","attributes":{},"value":["Q-LAB PUCP"]},{"type":"character","attributes":{},"value":["https://qlab.pucp.edu.pe/"]}]}]},{"type":"character","attributes":{},"value":["2022-05-10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["toc","toc_depth"]}},"value":[{"type":"logical","attributes":{},"value":[true]},{"type":"integer","attributes":{},"value":[2]}]}]}]}
  </script>
  <!--/radix_placeholder_rmarkdown_metadata-->
  <!--radix_placeholder_navigation_in_header-->
  <meta name="distill:offset" content=""/>

  <script type="application/javascript">

    window.headroom_prevent_pin = false;

    window.document.addEventListener("DOMContentLoaded", function (event) {

      // initialize headroom for banner
      var header = $('header').get(0);
      var headerHeight = header.offsetHeight;
      var headroom = new Headroom(header, {
        tolerance: 5,
        onPin : function() {
          if (window.headroom_prevent_pin) {
            window.headroom_prevent_pin = false;
            headroom.unpin();
          }
        }
      });
      headroom.init();
      if(window.location.hash)
        headroom.unpin();
      $(header).addClass('headroom--transition');

      // offset scroll location for banner on hash change
      // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
      window.addEventListener("hashchange", function(event) {
        window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
      });

      // responsive menu
      $('.distill-site-header').each(function(i, val) {
        var topnav = $(this);
        var toggle = topnav.find('.nav-toggle');
        toggle.on('click', function() {
          topnav.toggleClass('responsive');
        });
      });

      // nav dropdowns
      $('.nav-dropbtn').click(function(e) {
        $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
        $(this).parent().siblings('.nav-dropdown')
           .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
      });
      $("body").click(function(e){
        $('.nav-dropdown-content').removeClass('nav-dropdown-active');
      });
      $(".nav-dropdown").click(function(e){
        e.stopPropagation();
      });
    });
  </script>

  <style type="text/css">

  /* Theme (user-documented overrideables for nav appearance) */

  .distill-site-nav {
    color: rgba(255, 255, 255, 0.8);
    background-color: #0F2E3D;
    font-size: 15px;
    font-weight: 300;
  }

  .distill-site-nav a {
    color: inherit;
    text-decoration: none;
  }

  .distill-site-nav a:hover {
    color: white;
  }

  @media print {
    .distill-site-nav {
      display: none;
    }
  }

  .distill-site-header {

  }

  .distill-site-footer {

  }


  /* Site Header */

  .distill-site-header {
    width: 100%;
    box-sizing: border-box;
    z-index: 3;
  }

  .distill-site-header .nav-left {
    display: inline-block;
    margin-left: 8px;
  }

  @media screen and (max-width: 768px) {
    .distill-site-header .nav-left {
      margin-left: 0;
    }
  }


  .distill-site-header .nav-right {
    float: right;
    margin-right: 8px;
  }

  .distill-site-header a,
  .distill-site-header .title {
    display: inline-block;
    text-align: center;
    padding: 14px 10px 14px 10px;
  }

  .distill-site-header .title {
    font-size: 18px;
    min-width: 150px;
  }

  .distill-site-header .logo {
    padding: 0;
  }

  .distill-site-header .logo img {
    display: none;
    max-height: 20px;
    width: auto;
    margin-bottom: -4px;
  }

  .distill-site-header .nav-image img {
    max-height: 18px;
    width: auto;
    display: inline-block;
    margin-bottom: -3px;
  }



  @media screen and (min-width: 1000px) {
    .distill-site-header .logo img {
      display: inline-block;
    }
    .distill-site-header .nav-left {
      margin-left: 20px;
    }
    .distill-site-header .nav-right {
      margin-right: 20px;
    }
    .distill-site-header .title {
      padding-left: 12px;
    }
  }


  .distill-site-header .nav-toggle {
    display: none;
  }

  .nav-dropdown {
    display: inline-block;
    position: relative;
  }

  .nav-dropdown .nav-dropbtn {
    border: none;
    outline: none;
    color: rgba(255, 255, 255, 0.8);
    padding: 16px 10px;
    background-color: transparent;
    font-family: inherit;
    font-size: inherit;
    font-weight: inherit;
    margin: 0;
    margin-top: 1px;
    z-index: 2;
  }

  .nav-dropdown-content {
    display: none;
    position: absolute;
    background-color: white;
    min-width: 200px;
    border: 1px solid rgba(0,0,0,0.15);
    border-radius: 4px;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
    z-index: 1;
    margin-top: 2px;
    white-space: nowrap;
    padding-top: 4px;
    padding-bottom: 4px;
  }

  .nav-dropdown-content hr {
    margin-top: 4px;
    margin-bottom: 4px;
    border: none;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .nav-dropdown-active {
    display: block;
  }

  .nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
    color: black;
    padding: 6px 24px;
    text-decoration: none;
    display: block;
    text-align: left;
  }

  .nav-dropdown-content .nav-dropdown-header {
    display: block;
    padding: 5px 24px;
    padding-bottom: 0;
    text-transform: uppercase;
    font-size: 14px;
    color: #999999;
    white-space: nowrap;
  }

  .nav-dropdown:hover .nav-dropbtn {
    color: white;
  }

  .nav-dropdown-content a:hover {
    background-color: #ddd;
    color: black;
  }

  .nav-right .nav-dropdown-content {
    margin-left: -45%;
    right: 0;
  }

  @media screen and (max-width: 768px) {
    .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
    .distill-site-header a.nav-toggle {
      float: right;
      display: block;
    }
    .distill-site-header .title {
      margin-left: 0;
    }
    .distill-site-header .nav-right {
      margin-right: 0;
    }
    .distill-site-header {
      overflow: hidden;
    }
    .nav-right .nav-dropdown-content {
      margin-left: 0;
    }
  }


  @media screen and (max-width: 768px) {
    .distill-site-header.responsive {position: relative; min-height: 500px; }
    .distill-site-header.responsive a.nav-toggle {
      position: absolute;
      right: 0;
      top: 0;
    }
    .distill-site-header.responsive a,
    .distill-site-header.responsive .nav-dropdown {
      display: block;
      text-align: left;
    }
    .distill-site-header.responsive .nav-left,
    .distill-site-header.responsive .nav-right {
      width: 100%;
    }
    .distill-site-header.responsive .nav-dropdown {float: none;}
    .distill-site-header.responsive .nav-dropdown-content {position: relative;}
    .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
      display: block;
      width: 100%;
      text-align: left;
    }
  }

  /* Site Footer */

  .distill-site-footer {
    width: 100%;
    overflow: hidden;
    box-sizing: border-box;
    z-index: 3;
    margin-top: 30px;
    padding-top: 30px;
    padding-bottom: 30px;
    text-align: center;
  }

  /* Headroom */

  d-title {
    padding-top: 6rem;
  }

  @media print {
    d-title {
      padding-top: 4rem;
    }
  }

  .headroom {
    z-index: 1000;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
  }

  .headroom--transition {
    transition: all .4s ease-in-out;
  }

  .headroom--unpinned {
    top: -100px;
  }

  .headroom--pinned {
    top: 0;
  }

  /* adjust viewport for navbar height */
  /* helps vertically center bootstrap (non-distill) content */
  .min-vh-100 {
    min-height: calc(100vh - 100px) !important;
  }

  </style>

  <script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
  <link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet"/>
  <link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet"/>
  <script src="site_libs/headroom-0.9.4/headroom.min.js"></script>
  <script src="site_libs/autocomplete-0.37.1/autocomplete.min.js"></script>
  <script src="site_libs/fuse-6.4.1/fuse.min.js"></script>

  <script type="application/javascript">

  function getMeta(metaName) {
    var metas = document.getElementsByTagName('meta');
    for (let i = 0; i < metas.length; i++) {
      if (metas[i].getAttribute('name') === metaName) {
        return metas[i].getAttribute('content');
      }
    }
    return '';
  }

  function offsetURL(url) {
    var offset = getMeta('distill:offset');
    return offset ? offset + '/' + url : url;
  }

  function createFuseIndex() {

    // create fuse index
    var options = {
      keys: [
        { name: 'title', weight: 20 },
        { name: 'categories', weight: 15 },
        { name: 'description', weight: 10 },
        { name: 'contents', weight: 5 },
      ],
      ignoreLocation: true,
      threshold: 0
    };
    var fuse = new window.Fuse([], options);

    // fetch the main search.json
    return fetch(offsetURL('search.json'))
      .then(function(response) {
        if (response.status == 200) {
          return response.json().then(function(json) {
            // index main articles
            json.articles.forEach(function(article) {
              fuse.add(article);
            });
            // download collections and index their articles
            return Promise.all(json.collections.map(function(collection) {
              return fetch(offsetURL(collection)).then(function(response) {
                if (response.status === 200) {
                  return response.json().then(function(articles) {
                    articles.forEach(function(article) {
                      fuse.add(article);
                    });
                  })
                } else {
                  return Promise.reject(
                    new Error('Unexpected status from search index request: ' +
                              response.status)
                  );
                }
              });
            })).then(function() {
              return fuse;
            });
          });

        } else {
          return Promise.reject(
            new Error('Unexpected status from search index request: ' +
                        response.status)
          );
        }
      });
  }

  window.document.addEventListener("DOMContentLoaded", function (event) {

    // get search element (bail if we don't have one)
    var searchEl = window.document.getElementById('distill-search');
    if (!searchEl)
      return;

    createFuseIndex()
      .then(function(fuse) {

        // make search box visible
        searchEl.classList.remove('hidden');

        // initialize autocomplete
        var options = {
          autoselect: true,
          hint: false,
          minLength: 2,
        };
        window.autocomplete(searchEl, options, [{
          source: function(query, callback) {
            const searchOptions = {
              isCaseSensitive: false,
              shouldSort: true,
              minMatchCharLength: 2,
              limit: 10,
            };
            var results = fuse.search(query, searchOptions);
            callback(results
              .map(function(result) { return result.item; })
            );
          },
          templates: {
            suggestion: function(suggestion) {
              var img = suggestion.preview && Object.keys(suggestion.preview).length > 0
                ? `<img src="${offsetURL(suggestion.preview)}"</img>`
                : '';
              var html = `
                <div class="search-item">
                  <h3>${suggestion.title}</h3>
                  <div class="search-item-description">
                    ${suggestion.description || ''}
                  </div>
                  <div class="search-item-preview">
                    ${img}
                  </div>
                </div>
              `;
              return html;
            }
          }
        }]).on('autocomplete:selected', function(event, suggestion) {
          window.location.href = offsetURL(suggestion.path);
        });
        // remove inline display style on autocompleter (we want to
        // manage responsive display via css)
        $('.algolia-autocomplete').css("display", "");
      })
      .catch(function(error) {
        console.log(error);
      });

  });

  </script>

  <style type="text/css">

  .nav-search {
    font-size: x-small;
  }

  /* Algolioa Autocomplete */

  .algolia-autocomplete {
    display: inline-block;
    margin-left: 10px;
    vertical-align: sub;
    background-color: white;
    color: black;
    padding: 6px;
    padding-top: 8px;
    padding-bottom: 0;
    border-radius: 6px;
    border: 1px #0F2E3D solid;
    width: 180px;
  }


  @media screen and (max-width: 768px) {
    .distill-site-nav .algolia-autocomplete {
      display: none;
      visibility: hidden;
    }
    .distill-site-nav.responsive .algolia-autocomplete {
      display: inline-block;
      visibility: visible;
    }
    .distill-site-nav.responsive .algolia-autocomplete .aa-dropdown-menu {
      margin-left: 0;
      width: 400px;
      max-height: 400px;
    }
  }

  .algolia-autocomplete .aa-input, .algolia-autocomplete .aa-hint {
    width: 90%;
    outline: none;
    border: none;
  }

  .algolia-autocomplete .aa-hint {
    color: #999;
  }
  .algolia-autocomplete .aa-dropdown-menu {
    width: 550px;
    max-height: 70vh;
    overflow-x: visible;
    overflow-y: scroll;
    padding: 5px;
    margin-top: 3px;
    margin-left: -150px;
    background-color: #fff;
    border-radius: 5px;
    border: 1px solid #999;
    border-top: none;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion {
    cursor: pointer;
    padding: 5px 4px;
    border-bottom: 1px solid #eee;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion:last-of-type {
    border-bottom: none;
    margin-bottom: 2px;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item {
    overflow: hidden;
    font-size: 0.8em;
    line-height: 1.4em;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item h3 {
    font-size: 1rem;
    margin-block-start: 0;
    margin-block-end: 5px;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-description {
    display: inline-block;
    overflow: hidden;
    height: 2.8em;
    width: 80%;
    margin-right: 4%;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview {
    display: inline-block;
    width: 15%;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img {
    height: 3em;
    width: auto;
    display: none;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img[src] {
    display: initial;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion.aa-cursor {
    background-color: #eee;
  }
  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion em {
    font-weight: bold;
    font-style: normal;
  }

  </style>


  <!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

  <style type="text/css">

  body {
    background-color: white;
  }

  .pandoc-table {
    width: 100%;
  }

  .pandoc-table>caption {
    margin-bottom: 10px;
  }

  .pandoc-table th:not([align]) {
    text-align: left;
  }

  .pagedtable-footer {
    font-size: 15px;
  }

  d-byline .byline {
    grid-template-columns: 2fr 2fr;
  }

  d-byline .byline h3 {
    margin-block-start: 1.5em;
  }

  d-byline .byline .authors-affiliations h3 {
    margin-block-start: 0.5em;
  }

  .authors-affiliations .orcid-id {
    width: 16px;
    height:16px;
    margin-left: 4px;
    margin-right: 4px;
    vertical-align: middle;
    padding-bottom: 2px;
  }

  d-title .dt-tags {
    margin-top: 1em;
    grid-column: text;
  }

  .dt-tags .dt-tag {
    text-decoration: none;
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0em 0.4em;
    margin-right: 0.5em;
    margin-bottom: 0.4em;
    font-size: 70%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  d-article table.gt_table td,
  d-article table.gt_table th {
    border-bottom: none;
  }

  .html-widget {
    margin-bottom: 2.0em;
  }

  .l-screen-inset {
    padding-right: 16px;
  }

  .l-screen .caption {
    margin-left: 10px;
  }

  .shaded {
    background: rgb(247, 247, 247);
    padding-top: 20px;
    padding-bottom: 20px;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .html-widget {
    margin-bottom: 0;
    border: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .shaded-content {
    background: white;
  }

  .text-output {
    margin-top: 0;
    line-height: 1.5em;
  }

  .hidden {
    display: none !important;
  }

  d-article {
    padding-top: 2.5rem;
    padding-bottom: 30px;
  }

  d-appendix {
    padding-top: 30px;
  }

  d-article>p>img {
    width: 100%;
  }

  d-article h2 {
    margin: 1rem 0 1.5rem 0;
  }

  d-article h3 {
    margin-top: 1.5rem;
  }

  d-article iframe {
    border: 1px solid rgba(0, 0, 0, 0.1);
    margin-bottom: 2.0em;
    width: 100%;
  }

  /* Tweak code blocks */

  d-article div.sourceCode code,
  d-article pre code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: auto;
  }

  d-article div.sourceCode {
    background-color: white;
  }

  d-article div.sourceCode pre {
    padding-left: 10px;
    font-size: 12px;
    border-left: 2px solid rgba(0,0,0,0.1);
  }

  d-article pre {
    font-size: 12px;
    color: black;
    background: none;
    margin-top: 0;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  d-article pre a {
    border-bottom: none;
  }

  d-article pre a:hover {
    border-bottom: none;
    text-decoration: underline;
  }

  d-article details {
    grid-column: text;
    margin-bottom: 0.8em;
  }

  @media(min-width: 768px) {

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: visible !important;
  }

  d-article div.sourceCode pre {
    padding-left: 18px;
    font-size: 14px;
  }

  d-article pre {
    font-size: 14px;
  }

  }

  figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  /* CSS for d-contents */

  .d-contents {
    grid-column: text;
    color: rgba(0,0,0,0.8);
    font-size: 0.9em;
    padding-bottom: 1em;
    margin-bottom: 1em;
    padding-bottom: 0.5em;
    margin-bottom: 1em;
    padding-left: 0.25em;
    justify-self: start;
  }

  @media(min-width: 1000px) {
    .d-contents.d-contents-float {
      height: 0;
      grid-column-start: 1;
      grid-column-end: 4;
      justify-self: center;
      padding-right: 3em;
      padding-left: 2em;
    }
  }

  .d-contents nav h3 {
    font-size: 18px;
    margin-top: 0;
    margin-bottom: 1em;
  }

  .d-contents li {
    list-style-type: none
  }

  .d-contents nav > ul {
    padding-left: 0;
  }

  .d-contents ul {
    padding-left: 1em
  }

  .d-contents nav ul li {
    margin-top: 0.6em;
    margin-bottom: 0.2em;
  }

  .d-contents nav a {
    font-size: 13px;
    border-bottom: none;
    text-decoration: none
    color: rgba(0, 0, 0, 0.8);
  }

  .d-contents nav a:hover {
    text-decoration: underline solid rgba(0, 0, 0, 0.6)
  }

  .d-contents nav > ul > li > a {
    font-weight: 600;
  }

  .d-contents nav > ul > li > ul {
    font-weight: inherit;
  }

  .d-contents nav > ul > li > ul > li {
    margin-top: 0.2em;
  }


  .d-contents nav ul {
    margin-top: 0;
    margin-bottom: 0.25em;
  }

  .d-article-with-toc h2:nth-child(2) {
    margin-top: 0;
  }


  /* Figure */

  .figure {
    position: relative;
    margin-bottom: 2.5em;
    margin-top: 1.5em;
  }

  .figure img {
    width: 100%;
  }

  .figure .caption {
    color: rgba(0, 0, 0, 0.6);
    font-size: 12px;
    line-height: 1.5em;
  }

  .figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  .figure .caption a {
    color: rgba(0, 0, 0, 0.6);
  }

  .figure .caption b,
  .figure .caption strong, {
    font-weight: 600;
    color: rgba(0, 0, 0, 1.0);
  }

  /* Citations */

  d-article .citation {
    color: inherit;
    cursor: inherit;
  }

  div.hanging-indent{
    margin-left: 1em; text-indent: -1em;
  }

  /* Citation hover box */

  .tippy-box[data-theme~=light-border] {
    background-color: rgba(250, 250, 250, 0.95);
  }

  .tippy-content > p {
    margin-bottom: 0;
    padding: 2px;
  }


  /* Tweak 1000px media break to show more text */

  @media(min-width: 1000px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 16px;
    }

    .grid {
      grid-column-gap: 16px;
    }

    d-article {
      font-size: 1.06rem;
      line-height: 1.7em;
    }
    figure .caption, .figure .caption, figure figcaption {
      font-size: 13px;
    }
  }

  @media(min-width: 1180px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 32px;
    }

    .grid {
      grid-column-gap: 32px;
    }
  }


  /* Get the citation styles for the appendix (not auto-injected on render since
     we do our own rendering of the citation appendix) */

  d-appendix .citation-appendix,
  .d-appendix .citation-appendix {
    font-size: 11px;
    line-height: 15px;
    border-left: 1px solid rgba(0, 0, 0, 0.1);
    padding-left: 18px;
    border: 1px solid rgba(0,0,0,0.1);
    background: rgba(0, 0, 0, 0.02);
    padding: 10px 18px;
    border-radius: 3px;
    color: rgba(150, 150, 150, 1);
    overflow: hidden;
    margin-top: -12px;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  /* Include appendix styles here so they can be overridden */

  d-appendix {
    contain: layout style;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-top: 60px;
    margin-bottom: 0;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    color: rgba(0,0,0,0.5);
    padding-top: 60px;
    padding-bottom: 48px;
  }

  d-appendix h3 {
    grid-column: page-start / text-start;
    font-size: 15px;
    font-weight: 500;
    margin-top: 1em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.65);
  }

  d-appendix h3 + * {
    margin-top: 1em;
  }

  d-appendix ol {
    padding: 0 0 0 15px;
  }

  @media (min-width: 768px) {
    d-appendix ol {
      padding: 0 0 0 30px;
      margin-left: -30px;
    }
  }

  d-appendix li {
    margin-bottom: 1em;
  }

  d-appendix a {
    color: rgba(0, 0, 0, 0.6);
  }

  d-appendix > * {
    grid-column: text;
  }

  d-appendix > d-footnote-list,
  d-appendix > d-citation-list,
  d-appendix > distill-appendix {
    grid-column: screen;
  }

  /* Include footnote styles here so they can be overridden */

  d-footnote-list {
    contain: layout style;
  }

  d-footnote-list > * {
    grid-column: text;
  }

  d-footnote-list a.footnote-backlink {
    color: rgba(0,0,0,0.3);
    padding-left: 0.5em;
  }



  /* Anchor.js */

  .anchorjs-link {
    /*transition: all .25s linear; */
    text-decoration: none;
    border-bottom: none;
  }
  *:hover > .anchorjs-link {
    margin-left: -1.125em !important;
    text-decoration: none;
    border-bottom: none;
  }

  /* Social footer */

  .social_footer {
    margin-top: 30px;
    margin-bottom: 0;
    color: rgba(0,0,0,0.67);
  }

  .disqus-comments {
    margin-right: 30px;
  }

  .disqus-comment-count {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
    cursor: pointer;
  }

  #disqus_thread {
    margin-top: 30px;
  }

  .article-sharing a {
    border-bottom: none;
    margin-right: 8px;
  }

  .article-sharing a:hover {
    border-bottom: none;
  }

  .sidebar-section.subscribe {
    font-size: 12px;
    line-height: 1.6em;
  }

  .subscribe p {
    margin-bottom: 0.5em;
  }


  .article-footer .subscribe {
    font-size: 15px;
    margin-top: 45px;
  }


  .sidebar-section.custom {
    font-size: 12px;
    line-height: 1.6em;
  }

  .custom p {
    margin-bottom: 0.5em;
  }

  /* Styles for listing layout (hide title) */
  .layout-listing d-title, .layout-listing .d-title {
    display: none;
  }

  /* Styles for posts lists (not auto-injected) */


  .posts-with-sidebar {
    padding-left: 45px;
    padding-right: 45px;
  }

  .posts-list .description h2,
  .posts-list .description p {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  }

  .posts-list .description h2 {
    font-weight: 700;
    border-bottom: none;
    padding-bottom: 0;
  }

  .posts-list h2.post-tag {
    border-bottom: 1px solid rgba(0, 0, 0, 0.2);
    padding-bottom: 12px;
  }
  .posts-list {
    margin-top: 60px;
    margin-bottom: 24px;
  }

  .posts-list .post-preview {
    text-decoration: none;
    overflow: hidden;
    display: block;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    padding: 24px 0;
  }

  .post-preview-last {
    border-bottom: none !important;
  }

  .posts-list .posts-list-caption {
    grid-column: screen;
    font-weight: 400;
  }

  .posts-list .post-preview h2 {
    margin: 0 0 6px 0;
    line-height: 1.2em;
    font-style: normal;
    font-size: 24px;
  }

  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.4em;
    font-size: 16px;
  }

  .posts-list .post-preview .thumbnail {
    box-sizing: border-box;
    margin-bottom: 24px;
    position: relative;
    max-width: 500px;
  }
  .posts-list .post-preview img {
    width: 100%;
    display: block;
  }

  .posts-list .metadata {
    font-size: 12px;
    line-height: 1.4em;
    margin-bottom: 18px;
  }

  .posts-list .metadata > * {
    display: inline-block;
  }

  .posts-list .metadata .publishedDate {
    margin-right: 2em;
  }

  .posts-list .metadata .dt-authors {
    display: block;
    margin-top: 0.3em;
    margin-right: 2em;
  }

  .posts-list .dt-tags {
    display: block;
    line-height: 1em;
  }

  .posts-list .dt-tags .dt-tag {
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0.3em 0.4em;
    margin-right: 0.2em;
    margin-bottom: 0.4em;
    font-size: 60%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  .posts-list img {
    opacity: 1;
  }

  .posts-list img[data-src] {
    opacity: 0;
  }

  .posts-more {
    clear: both;
  }


  .posts-sidebar {
    font-size: 16px;
  }

  .posts-sidebar h3 {
    font-size: 16px;
    margin-top: 0;
    margin-bottom: 0.5em;
    font-weight: 400;
    text-transform: uppercase;
  }

  .sidebar-section {
    margin-bottom: 30px;
  }

  .categories ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }

  .categories li {
    color: rgba(0, 0, 0, 0.8);
    margin-bottom: 0;
  }

  .categories li>a {
    border-bottom: none;
  }

  .categories li>a:hover {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  }

  .categories .active {
    font-weight: 600;
  }

  .categories .category-count {
    color: rgba(0, 0, 0, 0.4);
  }


  @media(min-width: 768px) {
    .posts-list .post-preview h2 {
      font-size: 26px;
    }
    .posts-list .post-preview .thumbnail {
      float: right;
      width: 30%;
      margin-bottom: 0;
    }
    .posts-list .post-preview .description {
      float: left;
      width: 45%;
    }
    .posts-list .post-preview .metadata {
      float: left;
      width: 20%;
      margin-top: 8px;
    }
    .posts-list .post-preview p {
      margin: 0 0 12px 0;
      line-height: 1.5em;
      font-size: 16px;
    }
    .posts-with-sidebar .posts-list {
      float: left;
      width: 75%;
    }
    .posts-with-sidebar .posts-sidebar {
      float: right;
      width: 20%;
      margin-top: 60px;
      padding-top: 24px;
      padding-bottom: 24px;
    }
  }


  /* Improve display for browsers without grid (IE/Edge <= 15) */

  .downlevel {
    line-height: 1.6em;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
    margin: 0;
  }

  .downlevel .d-title {
    padding-top: 6rem;
    padding-bottom: 1.5rem;
  }

  .downlevel .d-title h1 {
    font-size: 50px;
    font-weight: 700;
    line-height: 1.1em;
    margin: 0 0 0.5rem;
  }

  .downlevel .d-title p {
    font-weight: 300;
    font-size: 1.2rem;
    line-height: 1.55em;
    margin-top: 0;
  }

  .downlevel .d-byline {
    padding-top: 0.8em;
    padding-bottom: 0.8em;
    font-size: 0.8rem;
    line-height: 1.8em;
  }

  .downlevel .section-separator {
    border: none;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
  }

  .downlevel .d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
    padding-top: 1rem;
    padding-bottom: 2rem;
  }


  .downlevel .d-appendix {
    padding-left: 0;
    padding-right: 0;
    max-width: none;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.5);
    padding-top: 40px;
    padding-bottom: 48px;
  }

  .downlevel .footnotes ol {
    padding-left: 13px;
  }

  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
    padding-left: 40px;
    padding-right: 40px;
  }

  @media(min-width: 768px) {
    .downlevel .base-grid,
    .downlevel .distill-header,
    .downlevel .d-title,
    .downlevel .d-abstract,
    .downlevel .d-article,
    .downlevel .d-appendix,
    .downlevel .distill-appendix,
    .downlevel .d-byline,
    .downlevel .d-footnote-list,
    .downlevel .d-citation-list,
    .downlevel .distill-footer,
    .downlevel .appendix-bottom,
    .downlevel .posts-container {
    padding-left: 150px;
    padding-right: 150px;
    max-width: 900px;
  }
  }

  .downlevel pre code {
    display: block;
    border-left: 2px solid rgba(0, 0, 0, .1);
    padding: 0 0 0 20px;
    font-size: 14px;
  }

  .downlevel code, .downlevel pre {
    color: black;
    background: none;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  .downlevel .posts-list .post-preview {
    color: inherit;
  }



  </style>

  <script type="application/javascript">

  function is_downlevel_browser() {
    if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                   window.navigator.userAgent)) {
      return true;
    } else {
      return window.load_distill_framework === undefined;
    }
  }

  // show body when load is complete
  function on_load_complete() {

    // add anchors
    if (window.anchors) {
      window.anchors.options.placement = 'left';
      window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
    }


    // set body to visible
    document.body.style.visibility = 'visible';

    // force redraw for leaflet widgets
    if (window.HTMLWidgets) {
      var maps = window.HTMLWidgets.findAll(".leaflet");
      $.each(maps, function(i, el) {
        var map = this.getMap();
        map.invalidateSize();
        map.eachLayer(function(layer) {
          if (layer instanceof L.TileLayer)
            layer.redraw();
        });
      });
    }

    // trigger 'shown' so htmlwidgets resize
    $('d-article').trigger('shown');
  }

  function init_distill() {

    init_common();

    // create front matter
    var front_matter = $('<d-front-matter></d-front-matter>');
    $('#distill-front-matter').wrap(front_matter);

    // create d-title
    $('.d-title').changeElementType('d-title');

    // create d-byline
    var byline = $('<d-byline></d-byline>');
    $('.d-byline').replaceWith(byline);

    // create d-article
    var article = $('<d-article></d-article>');
    $('.d-article').wrap(article).children().unwrap();

    // move posts container into article
    $('.posts-container').appendTo($('d-article'));

    // create d-appendix
    $('.d-appendix').changeElementType('d-appendix');

    // flag indicating that we have appendix items
    var appendix = $('.appendix-bottom').children('h3').length > 0;

    // replace footnotes with <d-footnote>
    $('.footnote-ref').each(function(i, val) {
      appendix = true;
      var href = $(this).attr('href');
      var id = href.replace('#', '');
      var fn = $('#' + id);
      var fn_p = $('#' + id + '>p');
      fn_p.find('.footnote-back').remove();
      var text = fn_p.html();
      var dtfn = $('<d-footnote></d-footnote>');
      dtfn.html(text);
      $(this).replaceWith(dtfn);
    });
    // remove footnotes
    $('.footnotes').remove();

    // move refs into #references-listing
    $('#references-listing').replaceWith($('#refs'));

    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      var id = $(this).attr('id');
      $('.d-contents a[href="#' + id + '"]').parent().remove();
      appendix = true;
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
    });

    // show d-appendix if we have appendix content
    $("d-appendix").css('display', appendix ? 'grid' : 'none');

    // localize layout chunks to just output
    $('.layout-chunk').each(function(i, val) {

      // capture layout
      var layout = $(this).attr('data-layout');

      // apply layout to markdown level block elements
      var elements = $(this).children().not('details, div.sourceCode, pre, script');
      elements.each(function(i, el) {
        var layout_div = $('<div class="' + layout + '"></div>');
        if (layout_div.hasClass('shaded')) {
          var shaded_content = $('<div class="shaded-content"></div>');
          $(this).wrap(shaded_content);
          $(this).parent().wrap(layout_div);
        } else {
          $(this).wrap(layout_div);
        }
      });


      // unwrap the layout-chunk div
      $(this).children().unwrap();
    });

    // remove code block used to force  highlighting css
    $('.distill-force-highlighting-css').parent().remove();

    // remove empty line numbers inserted by pandoc when using a
    // custom syntax highlighting theme
    $('code.sourceCode a:empty').remove();

    // load distill framework
    load_distill_framework();

    // wait for window.distillRunlevel == 4 to do post processing
    function distill_post_process() {

      if (!window.distillRunlevel || window.distillRunlevel < 4)
        return;

      // hide author/affiliations entirely if we have no authors
      var front_matter = JSON.parse($("#distill-front-matter").html());
      var have_authors = front_matter.authors && front_matter.authors.length > 0;
      if (!have_authors)
        $('d-byline').addClass('hidden');

      // article with toc class
      $('.d-contents').parent().addClass('d-article-with-toc');

      // strip links that point to #
      $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

      // add orcid ids
      $('.authors-affiliations').find('.author').each(function(i, el) {
        var orcid_id = front_matter.authors[i].orcidID;
        if (orcid_id) {
          var a = $('<a></a>');
          a.attr('href', 'https://orcid.org/' + orcid_id);
          var img = $('<img></img>');
          img.addClass('orcid-id');
          img.attr('alt', 'ORCID ID');
          img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
          a.append(img);
          $(this).append(a);
        }
      });

      // hide elements of author/affiliations grid that have no value
      function hide_byline_column(caption) {
        $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
      }

      // affiliations
      var have_affiliations = false;
      for (var i = 0; i<front_matter.authors.length; ++i) {
        var author = front_matter.authors[i];
        if (author.affiliation !== "&nbsp;") {
          have_affiliations = true;
          break;
        }
      }
      if (!have_affiliations)
        $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

      // published date
      if (!front_matter.publishedDate)
        hide_byline_column("Published");

      // document object identifier
      var doi = $('d-byline').find('h3:contains("DOI")');
      var doi_p = doi.next().empty();
      if (!front_matter.doi) {
        // if we have a citation and valid citationText then link to that
        if ($('#citation').length > 0 && front_matter.citationText) {
          doi.html('Citation');
          $('<a href="#citation"></a>')
            .text(front_matter.citationText)
            .appendTo(doi_p);
        } else {
          hide_byline_column("DOI");
        }
      } else {
        $('<a></a>')
           .attr('href', "https://doi.org/" + front_matter.doi)
           .html(front_matter.doi)
           .appendTo(doi_p);
      }

       // change plural form of authors/affiliations
      if (front_matter.authors.length === 1) {
        var grid = $('.authors-affiliations');
        grid.children('h3:contains("Authors")').text('Author');
        grid.children('h3:contains("Affiliations")').text('Affiliation');
      }

      // remove d-appendix and d-footnote-list local styles
      $('d-appendix > style:first-child').remove();
      $('d-footnote-list > style:first-child').remove();

      // move appendix-bottom entries to the bottom
      $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
      $('.appendix-bottom').remove();

      // hoverable references
      $('span.citation[data-cites]').each(function() {
        var refs = $(this).attr('data-cites').split(" ");
        var refHtml = refs.map(function(ref) {
          return "<p>" + $('#ref-' + ref).html() + "</p>";
        }).join("\n");
        window.tippy(this, {
          allowHTML: true,
          content: refHtml,
          maxWidth: 500,
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        });
      });

      // clear polling timer
      clearInterval(tid);

      // show body now that everything is ready
      on_load_complete();
    }

    var tid = setInterval(distill_post_process, 50);
    distill_post_process();

  }

  function init_downlevel() {

    init_common();

     // insert hr after d-title
    $('.d-title').after($('<hr class="section-separator"/>'));

    // check if we have authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;

    // manage byline/border
    if (!have_authors)
      $('.d-byline').remove();
    $('.d-byline').after($('<hr class="section-separator"/>'));
    $('.d-byline a').remove();

    // remove toc
    $('.d-contents').remove();

    // move appendix elements
    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
    });


    // inject headers into references and footnotes
    var refs_header = $('<h3></h3>');
    refs_header.text('References');
    $('#refs').prepend(refs_header);

    var footnotes_header = $('<h3></h3');
    footnotes_header.text('Footnotes');
    $('.footnotes').children('hr').first().replaceWith(footnotes_header);

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // remove appendix if it's empty
    if ($('.d-appendix').children().length === 0)
      $('.d-appendix').remove();

    // prepend separator above appendix
    $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

    // trim code
    $('pre>code').each(function(i, val) {
      $(this).html($.trim($(this).html()));
    });

    // move posts-container right before article
    $('.posts-container').insertBefore($('.d-article'));

    $('body').addClass('downlevel');

    on_load_complete();
  }


  function init_common() {

    // jquery plugin to change element types
    (function($) {
      $.fn.changeElementType = function(newType) {
        var attrs = {};

        $.each(this[0].attributes, function(idx, attr) {
          attrs[attr.nodeName] = attr.nodeValue;
        });

        this.replaceWith(function() {
          return $("<" + newType + "/>", attrs).append($(this).contents());
        });
      };
    })(jQuery);

    // prevent underline for linked images
    $('a > img').parent().css({'border-bottom' : 'none'});

    // mark non-body figures created by knitr chunks as 100% width
    $('.layout-chunk').each(function(i, val) {
      var figures = $(this).find('img, .html-widget');
      if ($(this).attr('data-layout') !== "l-body") {
        figures.css('width', '100%');
      } else {
        figures.css('max-width', '100%');
        figures.filter("[width]").each(function(i, val) {
          var fig = $(this);
          fig.css('width', fig.attr('width') + 'px');
        });

      }
    });

    // auto-append index.html to post-preview links in file: protocol
    // and in rstudio ide preview
    $('.post-preview').each(function(i, val) {
      if (window.location.protocol === "file:")
        $(this).attr('href', $(this).attr('href') + "index.html");
    });

    // get rid of index.html references in header
    if (window.location.protocol !== "file:") {
      $('.distill-site-header a[href]').each(function(i,val) {
        $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
      });
    }

    // add class to pandoc style tables
    $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
    $('.kable-table').children('table').addClass('pandoc-table');

    // add figcaption style to table captions
    $('caption').parent('table').addClass("figcaption");

    // initialize posts list
    if (window.init_posts_list)
      window.init_posts_list();

    // implmement disqus comment link
    $('.disqus-comment-count').click(function() {
      window.headroom_prevent_pin = true;
      $('#disqus_thread').toggleClass('hidden');
      if (!$('#disqus_thread').hasClass('hidden')) {
        var offset = $(this).offset();
        $(window).resize();
        $('html, body').animate({
          scrollTop: offset.top - 35
        });
      }
    });
  }

  document.addEventListener('DOMContentLoaded', function() {
    if (is_downlevel_browser())
      init_downlevel();
    else
      window.addEventListener('WebComponentsReady', init_distill);
  });

  </script>

  <!--/radix_placeholder_distill-->
  <script src="site_libs/header-attrs-2.14/header-attrs.js"></script>
  <script src="site_libs/popper-2.6.0/popper.min.js"></script>
  <link href="site_libs/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="site_libs/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="site_libs/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="site_libs/anchor-4.2.2/anchor.min.js"></script>
  <script src="site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
  <!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Manipulación de data con Tidyverse","description":"En esta sección vamos a aprender a manipular data con los paquetes de tidyverse.","authors":[{"author":"Maria Pia van Oordt","authorURL":"https://www.linkedin.com/in/maria-pia-van-oordt-van-oordt-l%C3%B3pez-9a17a6233/","affiliation":"Q-LAB PUCP","affiliationURL":"https://qlab.pucp.edu.pe/","orcidID":""}],"publishedDate":"2022-05-10T00:00:00.000-05:00","citationText":"Oordt, 2022"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<a href="index.html" class="title">R con R</a>
</div>
<div class="nav-right">
<a href="index.html">Home</a>
<a href="about.html">About</a>
<div class="nav-dropdown">
<button class="nav-dropbtn">
Sesiones
 
<span class="down-arrow">&#x25BE;</span>
</button>
<div class="nav-dropdown-content">
<a href="instalacion_programas.html">Instalación de programas</a>
<a href="configurar_github.html">Conectar RStudio con Github</a>
<a href="basico_de_r.html">Aspectos básicos de R</a>
<a href="manipulacion_tidyverse.html">Manipulación con Tidyverse</a>
<a href="tablas.html">Tablas en R</a>
<a href="reportes.html">Exportar reportes</a>
</div>
</div>
<a href="https://github.com/aito123/r_con_r">
<i class="fa fa-github" aria-hidden="true"></i>
</a>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Manipulación de data con Tidyverse</h1>
<!--radix_placeholder_categories-->
<!--/radix_placeholder_categories-->
<p><p>En esta sección vamos a aprender a manipular data con los paquetes
de tidyverse.</p></p>
</div>

<div class="d-byline">
  Maria Pia van Oordt <a
href="https://www.linkedin.com/in/maria-pia-van-oordt-van-oordt-l%C3%B3pez-9a17a6233/"
class="uri">https://www.linkedin.com/in/maria-pia-van-oordt-van-oordt-l%C3%B3pez-9a17a6233/</a> (Q-LAB
PUCP)<a href="https://qlab.pucp.edu.pe/"
class="uri">https://qlab.pucp.edu.pe/</a>
  
<br/>2022-05-10
</div>

<div class="d-article">
<div class="layout-chunk" data-layout="l-body">
<p><img src="figuras/tidyverse.png" width="70%" style="display: block; margin: auto;" /></p>
</div>
<p><strong>¿Que es un paquete?</strong> Un paquete es una colección de
funciones y conjunto de datos desarrollados por la comunidad de R.
Ayudan a mejorarla funcionalidad del programa, agilizar ciertas tareas y
a agregar funciones nuevas.</p>
<p><strong>¿Que es Tidyverse?</strong></p>
<p>Tidyverse es una colección de paquetes de R diseñados para el Data
Science. Es conocido porque es uno de los más populares gracias a las
funciones muy útiles que provee para la manipulación de data ya que
tiene paquetes para cada paso del tratamiento de data y es por ello que
nos ayuda a trabajar las bases de datos. Ha sido desarrollo por
RSutdio.</p>
<p>Es <strong>consistente</strong>: Todos los paquete tienen una misma
estructura</p>
<p>Es <strong>Concatenable</strong>: Siempre se pueden unir pequeñas
partes</p>
<p>Para importar datos tenemos <strong>readr</strong>,
<strong>haven</strong> y <strong>readxl</strong>. Para limpiar los datos
usamos <strong>tidyr</strong>, para transofrmar los datos se usa
<strong>dplyr</strong>, que lo veremos a continuación, para modelar se
usa <strong>purr</strong> o <strong>broom</strong>, para visualizar se
usa <strong>ggplot2</strong>. Finalmente, para comunicar se usa
<strong>knitr</strong> para publicar los resultados por html, pdf, ppt.
y rmarkdown es la estructura de knitr.</p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="figuras/paquetes.png" width="70%" style="display: block; margin: auto;" /></p>
</div>
<p><strong>¿Como se instala un paquete?</strong> Cuando instalas un
paquete estas descargando una serie de funciones con un solo comando.
Para instalar un paquete solo tienes que correr el siguiente comando con
el nombre del paquete dentro del paréntesis entre comillas.</p>
<p><code>install.packages("tidyverse")</code></p>
<p><strong>Por ejemplo:</strong>:Puedes descargar solo el paquete
“ggplot2” usando los comandos indicados anteriormente
(“install.packages(”ggplot2”)). Sin embargo; si ya descargaste
“tidyverse”, ya descargaste ggplot2 también.</p>
<p><strong>Recuenden</strong>:Los comandos en R tienen que estar con los
espacios, comas, comillas, paréntesis y puntos dexactamente de cierta
forma , sino el comando no correrá! Es recomendable correr este comando
en la consola porque solo se tiene que descargar un paquete una vez por
lo cual si dejas el comando en tu script se podría volver a correr.</p>
<p><strong>Abrir el paquete</strong></p>
<p>Una vez instalado el paquete , ábrelo con el siguiente comando.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://tidyverse.tidyverse.org'>tidyverse</a></span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Esto se repite con todos los paquetes que quieras instalar y abrir.
Puedes ya tener el paquete descargado pero si no lo abres con este
comando, no podrás utilizar las funciones.Ya que tidyverse es un
conjunto de paquetes, si lo abres estas abriendo todos los paquetes que
este incluye. <strong>Otra opción</strong> es abrir solo el o los
paquetes que necesitas usar ya que abrir el paquete de tidyverse a veces
demora un poco debido a que son varios paquetes.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://dplyr.tidyverse.org'>dplyr</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://ggplot2.tidyverse.org'>ggplot2</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://tidyr.tidyverse.org'>tidyr</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://purrr.tidyverse.org'>purrr</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://yihui.org/knitr/'>knitr</a></span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>#Descargamos la Data</p>
<p>A continuación descargaremos la siguiente data para utilizar las
principales funciones dentro de Tidyverse y las más útiles para nuestro
trabajo en el Laboratorio.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#Esta librería sirve para abrir bases de datos que estan en formato SAS, SPSS, Stata, Systat, Weka</span>

<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://svn.r-project.org/R-packages/trunk/foreign/'>foreign</a></span><span class='op'>)</span>
<span class='va'>usa</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/foreign/man/read.spss.html'>read.spss</a></span><span class='op'>(</span><span class='st'>"usa.sav"</span>,
          use.value.labels <span class='op'>=</span> <span class='cn'>T</span>, 
          to.data.frame<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Siempre es bueno ver la base de datos y analizar su estructura; con
los siguientes comandos pueden hacerlo :</p>
<p><em>Ver la estructura de bases de datos, el tipo de variables</em> :
<code>str(usa)</code></p>
<p><em>Ver base de datos</em> : <code>View(usa)</code></p>
<p><em>Ver los nombres de las variables</em> :
<code>names(usa)</code></p>
<p><strong>Nota</strong>:Para ver la Base de datos también puedes
buscarla en tu environment y darle click.</p>
<p>##Principales Paquetes y funciones</p>
<p>#ggplot2</p>
<p>Este paquete sirve para crear gráficos basados en la data
seleccionada. También se le puede indicar una serie de parámetros como
el color y tipo de letra, los títulos de los gráficos y más
características que se indican con los comando.</p>
<p><strong>Grafico Pie</strong> :</p>
<p><em>Pasos previos</em>:</p>
<p><em>1</em> Formateo la variable como categórica.</p>
<p><em>2</em><strong>Acuerdense</strong> de revisar en el diccionario de
datos o en la misma base de datos,si es que posible verificarlo desde
ahi, <strong>COMO</strong> esta formateada la variable.</p>
<p><strong>Por ejemplo</strong> en este caso tendríamos que confirmar
que representa 1 y que representa 2 pero en esta base de datos los
niveles ya están etiquetados.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>usa</span><span class='op'>$</span><span class='va'>sex</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='va'>usa</span><span class='op'>$</span><span class='va'>sex</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/levels.html'>levels</a></span><span class='op'>(</span><span class='va'>usa</span><span class='op'>$</span><span class='va'>sex</span><span class='op'>)</span><span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Hombre"</span>,<span class='st'>"Mujer"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='va'>usa</span><span class='op'>$</span><span class='va'>sex</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code> Factor w/ 2 levels &quot;Hombre&quot;,&quot;Mujer&quot;: 2 2 2 2 1 1 2 2 2 2 ...</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/levels.html'>levels</a></span><span class='op'>(</span><span class='va'>usa</span><span class='op'>$</span><span class='va'>sex</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;Hombre&quot; &quot;Mujer&quot; </code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/table.html'>table</a></span><span class='op'>(</span><span class='va'>usa</span><span class='op'>$</span><span class='va'>sex</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>
Hombre  Mujer 
   790   1017 </code></pre>
</div>
<p><em>4</em> Creamos un dataframe con la variable que usaremos para el
gráfico, esto lo hacemos porque para los gráficos que haremos al
principio, no necesitamos que se representen todas las observaciones
como puntos sino que veremos más los porcentajes y la frecuencia de cada
categoría de la variable. Hay varias formas de hacer lo mismo, esta es
la que hemos elegido para esta capacitación para practicar las funciones
del dplyr.</p>
<p><em>Ojo</em> usamos <code>%&gt;%</code> como un “conector” , es útil
pensarlo como un ” y luego”. También usamos las funciones de dyplr.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>df</span><span class='op'>&lt;-</span><span class='va'>usa</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>  <span class='co'>#creamos un dataframe llamado "df"</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>sex</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='co'>#Agrupamos los datos por la variable "sex"</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/count.html'>count</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='co'>#Contamos la frecuencia de las categorias de sex, es decir, Hombre-Mujer en esta base de datos </span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>ungroup</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='co'>#Desgrupamos la data para que no afecté el siguiente paso</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>pcnt <span class='op'>=</span> <span class='va'>n</span> <span class='op'>/</span> <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='va'>n</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='co'>#Usamos mutate para crear la variable pcnt en la cual vamos a dividir n(cantidad de observaciones en cada categoría)/ la suma total de observaciones de la muestra</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/arrange.html'>arrange</a></span><span class='op'>(</span><span class='va'>pcnt</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='co'>#ordenamos la variable creada de menor a mayor</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>etiquetas <span class='op'>=</span> <span class='fu'>scales</span><span class='fu'>::</span><span class='fu'><a href='https://scales.r-lib.org/reference/percent_format.html'>percent</a></span><span class='op'>(</span><span class='va'>pcnt</span><span class='op'>)</span><span class='op'>)</span> <span class='co'>#creamos otra variable llamada etiqueta en donde generamos los porcentajes de cada categoria según la cantidad de observaciones en cada una.</span>
</code></pre>
</div>
</div>
<p><strong>Nota</strong>: En este <a
href="https://htmlcolorcodes.com/es/">Link</a> encontramos todos los
colores de R, sus codigos y nombres.</p>
<p><em>Creamos el gráfico</em></p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='va'>df</span>, <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='st'>""</span>, y <span class='op'>=</span> <span class='va'>pcnt</span>, fill <span class='op'>=</span> <span class='va'>sex</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_bar.html'>geom_col</a></span><span class='op'>(</span>color <span class='op'>=</span> <span class='st'>"black"</span><span class='op'>)</span> <span class='op'>+</span> <span class='co'>#para los bordes</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_text.html'>geom_label</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>label <span class='op'>=</span> <span class='va'>n</span><span class='op'>)</span>, color <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"black"</span>, <span class='st'>"black"</span><span class='op'>)</span>,
            position <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/position_stack.html'>position_stack</a></span><span class='op'>(</span>vjust <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span>,
            show.legend <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>+</span> <span class='co'>#geom_label es para las etiquetas</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/guides.html'>guides</a></span><span class='op'>(</span>fill <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/guide_legend.html'>guide_legend</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"sexo"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> <span class='co'>#para la leyenda y el título</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_fill_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"#CEFF33"</span>, <span class='st'>"lightblue"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> <span class='co'>#para ponerle color al grafico</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/coord_polar.html'>coord_polar</a></span><span class='op'>(</span>theta <span class='op'>=</span> <span class='st'>"y"</span><span class='op'>)</span> <span class='op'>+</span> <span class='co'>#para convertir la barra en circulo</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_void</a></span><span class='op'>(</span><span class='op'>)</span> <span class='co'>#el tema, este borra todo lo que esta alrededor del grafico, hay otros que lo ponen en un cuadrado o indican el centro exacto etc.</span>
</code></pre>
</div>
<p><img src="manipulacion_tidyverse_files/figure-html5/unnamed-chunk-8-1.png" width="624" /></p>
</div>
<p><em>Generamos el mismo gráfico pero con porcentajes</em></p>
<p>Para ello ponemos la variable “etiquetas” que creamos al principio
dentro del comando geom_label(que se encarga de las etiquetas). Con esto
le estamos diciendo a R que ponga en las etiquetas el valor de la
variable etiqueta en cada caso; es decir, el valor de la variable
etiqueta en el caso de las mujeres y en el caso de los hombres. Debido a
la formula de n/sum(n), nos dara el porcentaje de cantidad de mujeres y
hombres.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='va'>df</span>, <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='st'>""</span>, y <span class='op'>=</span> <span class='va'>pcnt</span>, fill <span class='op'>=</span> <span class='va'>sex</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_bar.html'>geom_col</a></span><span class='op'>(</span>color <span class='op'>=</span> <span class='st'>"black"</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_text.html'>geom_label</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>label <span class='op'>=</span> <span class='va'>etiquetas</span><span class='op'>)</span>, color <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"black"</span>, <span class='st'>"black"</span><span class='op'>)</span>,
            position <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/position_stack.html'>position_stack</a></span><span class='op'>(</span>vjust <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span>,
            show.legend <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/guides.html'>guides</a></span><span class='op'>(</span>fill <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/guide_legend.html'>guide_legend</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"sexo"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_fill_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"#CEFF33"</span>, <span class='st'>"lightblue"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/coord_polar.html'>coord_polar</a></span><span class='op'>(</span>theta <span class='op'>=</span> <span class='st'>"y"</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_void</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="manipulacion_tidyverse_files/figure-html5/unnamed-chunk-9-1.png" width="624" /></p>
</div>
<p><strong>Grafico de Barras</strong></p>
<p>Ahora usaremos la base de datos usa.</p>
<p>fill= sex</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='va'>usa</span>, <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>sex</span>, fill <span class='op'>=</span> <span class='va'>sex</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> <span class='co'>#fill=sex : le estamos diciendo a R que </span>
  <span class='co'># rellene las barras según el sexo y automaticamente el R asigna colores</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_bar.html'>geom_bar</a></span><span class='op'>(</span><span class='op'>)</span> 
</code></pre>
</div>
<img src="manipulacion_tidyverse_files/figure-html5/unnamed-chunk-10-1.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># geom_text(aes(label=n), vjust = 2, colour = "black")</span>
</code></pre>
</div>
</div>
<p>Ahora vamos a especificarle a R que color queremos para cada
barra</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>df1</span><span class='op'>&lt;-</span><span class='va'>usa</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>  
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>sex</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/count.html'>count</a></span><span class='op'>(</span><span class='op'>)</span>

<span class='co'>#Porcentaje</span>
<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='va'>df</span>, <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>sex</span> , y <span class='op'>=</span> <span class='va'>n</span>, fill <span class='op'>=</span> <span class='va'>sex</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_bar.html'>geom_col</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_fill_manual</a></span><span class='op'>(</span>values<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"green"</span>, <span class='st'>"pink"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/guides.html'>guides</a></span><span class='op'>(</span>fill <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/guide_legend.html'>guide_legend</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Cantidad de mujeres y hombres"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_text.html'>geom_text</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>label <span class='op'>=</span> <span class='va'>etiquetas</span><span class='op'>)</span>, vjust <span class='op'>=</span> <span class='fl'>1.5</span>, colour <span class='op'>=</span> <span class='st'>"black"</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="manipulacion_tidyverse_files/figure-html5/unnamed-chunk-11-1.png" width="624" /></p>
</div>
Con frecuencia
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='va'>df</span>, <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>sex</span> , y <span class='op'>=</span> <span class='va'>n</span>, fill <span class='op'>=</span> <span class='va'>sex</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_bar.html'>geom_col</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_fill_manual</a></span><span class='op'>(</span>values<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"green"</span>, <span class='st'>"pink"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/guides.html'>guides</a></span><span class='op'>(</span>fill <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/guide_legend.html'>guide_legend</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Cantidad de mujeres y hombres"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_text.html'>geom_text</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>label <span class='op'>=</span> <span class='va'>n</span><span class='op'>)</span>, vjust <span class='op'>=</span> <span class='fl'>1.5</span>, colour <span class='op'>=</span> <span class='st'>"black"</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="manipulacion_tidyverse_files/figure-html5/unnamed-chunk-12-1.png" width="624" /></p>
</div>
<p><strong>Histograma</strong></p>
<p>Usamos la variable ingresos porque con este gráfico representamos las
frecuencias por lo cual se usa para graficar variables númericas.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='va'>usa</span>,<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>ingresos</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_histogram.html'>geom_histogram</a></span><span class='op'>(</span>color <span class='op'>=</span> <span class='fl'>1</span>, fill <span class='op'>=</span> <span class='st'>"blue"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle</a></span><span class='op'>(</span><span class='st'>"Ingresos"</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="manipulacion_tidyverse_files/figure-html5/unnamed-chunk-13-1.png" width="624" /></p>
</div>
<p><strong>Boxplot</strong></p>
<p><em>Basico</em></p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='va'>usa</span>, <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>sex</span>, y <span class='op'>=</span> <span class='va'>ingresos</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_boxplot.html'>stat_boxplot</a></span><span class='op'>(</span>geom <span class='op'>=</span> <span class='st'>"errorbar"</span>,
               width <span class='op'>=</span> <span class='fl'>0.15</span>,
               linetype <span class='op'>=</span><span class='fl'>2</span>, <span class='co'>#tipo de linea</span>
               color <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_boxplot.html'>geom_boxplot</a></span><span class='op'>(</span>linetype <span class='op'>=</span> <span class='fl'>2</span>,
               lwd <span class='op'>=</span> <span class='fl'>0.5</span>, <span class='co'>#ancho de linea</span>
               fill <span class='op'>=</span> <span class='fl'>2</span>, <span class='co'>#color de la caja</span>
               alpha <span class='op'>=</span> <span class='fl'>0.5</span>, <span class='co'>#transparencia</span>
               color <span class='op'>=</span> <span class='fl'>1</span>, <span class='co'>#color borde</span>
               outlier.colour <span class='op'>=</span><span class='fl'>2</span><span class='op'>)</span> <span class='op'>+</span> <span class='co'>#color atipicos</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle</a></span> <span class='op'>(</span><span class='st'>"Ingresos según el sexo"</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="manipulacion_tidyverse_files/figure-html5/unnamed-chunk-14-1.png" width="624" /></p>
</div>
<p><em>Con puntos que representan las observaciones</em></p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='va'>usa</span>, <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>sex</span>, y <span class='op'>=</span> <span class='va'>ingresos</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_boxplot.html'>stat_boxplot</a></span><span class='op'>(</span>geom <span class='op'>=</span> <span class='st'>"errorbar"</span>,
               width <span class='op'>=</span> <span class='fl'>0.15</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_boxplot.html'>geom_boxplot</a></span><span class='op'>(</span>outlier.shape <span class='op'>=</span> <span class='cn'>NA</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_jitter.html'>geom_jitter</a></span><span class='op'>(</span>width <span class='op'>=</span> <span class='fl'>0.2</span>,colour <span class='op'>=</span> <span class='fl'>2</span>, shape <span class='op'>=</span> <span class='fl'>17</span>, size <span class='op'>=</span> <span class='fl'>1</span>, <span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle</a></span> <span class='op'>(</span><span class='st'>"Ingresos según el sexo"</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="manipulacion_tidyverse_files/figure-html5/unnamed-chunk-15-1.png" width="624" /></p>
</div>
<p><em>Con diferentes colores de cajas</em></p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='va'>usa</span>, <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>sex</span>, y <span class='op'>=</span> <span class='va'>ingresos</span>, 
                colour <span class='op'>=</span> <span class='va'>sex</span>, 
                shape <span class='op'>=</span> <span class='va'>sex</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_boxplot.html'>geom_boxplot</a></span><span class='op'>(</span>outlier.shape <span class='op'>=</span> <span class='cn'>NA</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_jitter.html'>geom_jitter</a></span><span class='op'>(</span>width <span class='op'>=</span> <span class='fl'>0.2</span>,colour <span class='op'>=</span> <span class='fl'>2</span> , shape <span class='op'>=</span> <span class='fl'>17</span>, size <span class='op'>=</span> <span class='fl'>1</span>, <span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle</a></span> <span class='op'>(</span><span class='st'>"Ingresos según el sexo"</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="manipulacion_tidyverse_files/figure-html5/unnamed-chunk-16-1.png" width="624" /></p>
</div>
<p>#dplyr</p>
<p>El paquete dplyr es el más útil en R para la manipulación de datos.
Uno de los aportes mas grandes de dplyr es %&gt;% (se genera mediante
control shift M).</p>
<p><strong>Filter</strong> : Filtrar las filas según un criterio
específico. Es importante siempre acordarse que als filas son las
observaciones y las columnas las variables.</p>
<p><em>Ejemplos</em> :</p>
<p>Aca estamos filtrando de la data usa las observaciones (personas) que
son judios y apoyan el aborto solo en caso de violación. Podemos ver en
el resultado que hay 3 filas (rows) y 25 columnas (columns) lo que
significa que hay 3 observaciones, en este caso personas, que cumplen
con las dos caracteristicas seleccionadas. Las 25 columnas son las 25
variables de la base de datos que estamos usando y nos brindan la
infromación de esos 3 casos que han sido <em>filtrados</em>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>usa</span>, <span class='va'>relig</span><span class='op'>==</span><span class='st'>"Judio"</span>, <span class='va'>aborto</span><span class='op'>==</span><span class='st'>"2. Solo caso de violacion"</span><span class='op'>)</span> 
</code></pre>
</div>
<pre><code>    id     region            consipol edad intecamp clintpre gorepre
1  137     3. Sur 5. Algo conservador   57  3. Poco      100     100
2  310   4. Oeste 5. Algo conservador   51 1. Mucho        5      60
3 1598 1. Noreste      6. Conservador   35  3. Poco       50      75
  gbushpre                    aborto       anonac
1       51 2. Solo caso de violacion 1949 o antes
2       60 2. Solo caso de violacion 1949 o antes
3       50 2. Solo caso de violacion    1950-1965
                   educ   sexo ingresos     marital voto96
1 3. Más que secundaria Hombre    28036 5. Solteros   Votó
2 3. Más que secundaria  Mujer    46714   1. Casado   Votó
3 3. Más que secundaria  Mujer    97014   1. Casado   Votó
          quien96 su_ecopas clintpst gorepst gbushpst relig voto00
1 1. Bill Clinton  2. Igual       50      50       50 Judio   Votó
2   5. Ross Perot  2. Igual     &lt;NA&gt;    &lt;NA&gt;     &lt;NA&gt; Judio   &lt;NA&gt;
3 1. Bill Clinton  2. Igual       60      85       45 Judio   Votó
       confipol difclint    sex
1 2. Media Baja      -50 Hombre
2          &lt;NA&gt;       NA  Mujer
3       4. Alta       10  Mujer</code></pre>
</div>
<p>En el siguiente ejemplo se esta filtrando a todas las personas de la
muestra tengan una edad mayorigual a 80 años que sean mujeres y que
opinen que se deba permitir el aborto. R nos indica que hay 8 casos
filtrados</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>usa</span>, <span class='va'>sexo</span><span class='op'>==</span><span class='st'>"Mujer"</span>, <span class='va'>aborto</span><span class='op'>==</span><span class='st'>"4. Permitir"</span>, <span class='va'>edad</span><span class='op'>&gt;=</span><span class='fl'>80</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>    id          region            consipol edad intecamp clintpre
1 1646 2. Norte Centro 5. Algo conservador   93  3. Poco     &lt;NA&gt;
2 1789      1. Noreste     3. Algo liberal   88 1. Mucho      100
3 1687          3. Sur      1. Muy liberal   88 1. Mucho      100
4 1083 2. Norte Centro     3. Algo liberal   82  5. Nada      100
5  838          3. Sur     3. Algo liberal   81  5. Nada       85
6  581          3. Sur         4. Moderado   80 1. Mucho       75
7  707        4. Oeste 5. Algo conservador   80  3. Poco       40
8  900      1. Noreste  7. Muy Conservador   80  3. Poco        0
  gorepre gbushpre      aborto       anonac                    educ
1    &lt;NA&gt;     &lt;NA&gt; 4. Permitir         &lt;NA&gt;   3. Más que secundaria
2     100        0 4. Permitir 1949 o antes   3. Más que secundaria
3     100     &lt;NA&gt; 4. Permitir 1949 o antes   3. Más que secundaria
4     100       15 4. Permitir 1949 o antes 1. Menos que Secundaria
5      85       70 4. Permitir 1949 o antes   3. Más que secundaria
6      60       40 4. Permitir 1949 o antes   3. Más que secundaria
7      60       70 4. Permitir 1949 o antes   3. Más que secundaria
8      15      100 4. Permitir 1949 o antes   3. Más que secundaria
   sexo ingresos       marital  voto96         quien96 su_ecopas
1 Mujer       NA      2. Viudo    Votó     3. Bob Dole  2. Igual
2 Mujer    44054   5. Solteros    Votó 1. Bill Clinton  2. Igual
3 Mujer    92553      2. Viudo    Votó 1. Bill Clinton  2. Igual
4 Mujer    89441 3. Divorciado No votó            &lt;NA&gt;      &lt;NA&gt;
5 Mujer    16029   4. Separado    Votó 1. Bill Clinton  1. Mejor
6 Mujer    32838      2. Viudo    Votó 1. Bill Clinton      &lt;NA&gt;
7 Mujer    66983      2. Viudo    Votó   5. Ross Perot      &lt;NA&gt;
8 Mujer    59639      2. Viudo    Votó     3. Bob Dole      &lt;NA&gt;
  clintpst gorepst gbushpst       relig voto00      confipol difclint
1     &lt;NA&gt;    &lt;NA&gt;     &lt;NA&gt; Protestante   Votó          &lt;NA&gt;       NA
2      100     100     &lt;NA&gt;    Catolico   Votó          &lt;NA&gt;        0
3     &lt;NA&gt;    &lt;NA&gt;     &lt;NA&gt; Protestante   &lt;NA&gt;          &lt;NA&gt;       NA
4      100     100        0 Protestante   Votó 2. Media Baja        0
5       85      87       80 Protestante   Votó       4. Alta        0
6       45      55       45 Protestante   Votó 2. Media Baja      -30
7       40      60       60 Protestante   Votó 3. Media Alta        0
8        0      50       85 Protestante   Votó 2. Media Baja        0
    sex
1 Mujer
2 Mujer
3 Mujer
4 Mujer
5 Mujer
6 Mujer
7 Mujer
8 Mujer</code></pre>
</div>
<p>Podemos incluir varias variables y filtrar la base de datos con todas
las variables que queramos.</p>
<p><strong>select</strong>: Este comando nos permite seleccionar un
subconjunto de variables de la base de datos indicando sus nombres.</p>
<p><em>Ejemplo</em></p>
<p>Aca estamos seleccionando la variable intecamp y sexo de la base de
datos usa y las estamos guardando en un un dataframe</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>Seleccion</span><span class='op'>&lt;-</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>usa</span>, <span class='va'>intecamp</span>, <span class='va'>sexo</span><span class='op'>)</span><span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fl'>10</span><span class='op'>)</span>
<span class='co'>#Seleccion</span>
</code></pre>
</div>
</div>
<p>Tambien podemos usar este comando para seleccionar todas las
variables <em>menos</em> algunas.</p>
<p>Por ejemplo aca estamos selecionando todas las variables de la base
de datos “usa” <em>menos</em> las variables “voto96” y “quien96”.
Asimismo, guardamos esta selección de variables en un dataframe</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># quitando variables</span>
<span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>usa</span>, <span class='op'>-</span><span class='va'>voto96</span>, <span class='op'>-</span><span class='va'>quien96</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fl'>10</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>     id          region            consipol edad intecamp clintpre
1  1347          3. Sur                &lt;NA&gt;   97  5. Nada       40
2  1226          3. Sur         4. Moderado   96  3. Poco       85
3  1300 2. Norte Centro          2. Liberal   95  5. Nada      100
4  1646 2. Norte Centro 5. Algo conservador   93  3. Poco     &lt;NA&gt;
5   799          3. Sur 5. Algo conservador   93 1. Mucho       85
6  1328        4. Oeste                &lt;NA&gt;   92  5. Nada       50
7  1412          3. Sur 5. Algo conservador   91  3. Poco       30
8   229 2. Norte Centro      6. Conservador   90 1. Mucho       50
9  1652          3. Sur      6. Conservador   90 1. Mucho       60
10  546 2. Norte Centro 5. Algo conservador   89  5. Nada     &lt;NA&gt;
   gorepre gbushpre                    aborto       anonac
1       60       80         1. Nunca permitir 1949 o antes
2       85       70 2. Solo caso de violacion 1949 o antes
3       85       70 2. Solo caso de violacion 1949 o antes
4     &lt;NA&gt;     &lt;NA&gt;               4. Permitir         &lt;NA&gt;
5       60       90               4. Permitir 1949 o antes
6       50       50 2. Solo caso de violacion 1949 o antes
7       40       70 2. Solo caso de violacion 1949 o antes
8       60       60         1. Nunca permitir 1949 o antes
9       70       80 2. Solo caso de violacion 1949 o antes
10    &lt;NA&gt;     &lt;NA&gt;         1. Nunca permitir 1949 o antes
                      educ   sexo ingresos   marital su_ecopas
1  1. Menos que Secundaria  Mujer       NA 1. Casado      &lt;NA&gt;
2  1. Menos que Secundaria  Mujer    36297  2. Viudo      &lt;NA&gt;
3  1. Menos que Secundaria  Mujer     3856  2. Viudo  1. Mejor
4    3. Más que secundaria  Mujer       NA  2. Viudo  2. Igual
5  1. Menos que Secundaria Hombre    83308  2. Viudo  2. Igual
6  1. Menos que Secundaria Hombre    32926 1. Casado  1. Mejor
7   2. Secundaria Completa  Mujer    36207  2. Viudo  2. Igual
8    3. Más que secundaria  Mujer    82888  2. Viudo      &lt;NA&gt;
9    3. Más que secundaria  Mujer    66595  2. Viudo      &lt;NA&gt;
10 1. Menos que Secundaria  Mujer    95586  2. Viudo   3. Peor
   clintpst gorepst gbushpst       relig  voto00      confipol
1      &lt;NA&gt;    &lt;NA&gt;     &lt;NA&gt;        Otro    &lt;NA&gt;          &lt;NA&gt;
2        50      50       50 Protestante NO votó          &lt;NA&gt;
3      &lt;NA&gt;    &lt;NA&gt;     &lt;NA&gt; Protestante    &lt;NA&gt;          &lt;NA&gt;
4      &lt;NA&gt;    &lt;NA&gt;     &lt;NA&gt; Protestante    Votó          &lt;NA&gt;
5        30      40      100 Protestante    Votó       1. Baja
6        20      50       65 Protestante    Votó 2. Media Baja
7      &lt;NA&gt;    &lt;NA&gt;     &lt;NA&gt; Protestante    &lt;NA&gt;          &lt;NA&gt;
8        80      50     &lt;NA&gt; Protestante    Votó 2. Media Baja
9        80      75       90 Protestante NO votó       4. Alta
10     &lt;NA&gt;      40     &lt;NA&gt;    Catolico NO votó 2. Media Baja
   difclint    sex
1        NA  Mujer
2       -35  Mujer
3        NA  Mujer
4        NA  Mujer
5       -55 Hombre
6       -30 Hombre
7        NA  Mujer
8        30  Mujer
9        20  Mujer
10       NA  Mujer</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>menos96</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>usa</span>, <span class='op'>-</span><span class='va'>voto96</span>, <span class='op'>-</span><span class='va'>quien96</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fl'>10</span><span class='op'>)</span>
<span class='co'>#menos96 </span>
</code></pre>
</div>
</div>
<p>Si van a environment pueden ver todos los datasets, objetos etc que
han creado</p>
<p><strong>summarise</strong> Este comando te permite crear resúmenes de
grupos de datos según variables,funciones, medidas de tendencia central,
etc.</p>
<p><em>Ejemplo</em> : En este comando le estamos indicando a R que cree
una variable llamada “promgorepost” y que dentro de ella se encuentre el
promedio de los valores de la variable “gorepst”. En este caso el
comando summarise esta resumiendo todos los datos de la variable gorepst
y esta calculando el promedio de estos y también esta creando una
variable con los datos resumidos.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>usa</span><span class='op'>$</span><span class='va'>gorepst</span><span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>as.numeric</a></span><span class='op'>(</span><span class='va'>usa</span><span class='op'>$</span><span class='va'>gorepst</span><span class='op'>)</span>
<span class='va'>usa</span><span class='op'>$</span><span class='va'>gorepre</span><span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>as.numeric</a></span><span class='op'>(</span><span class='va'>usa</span><span class='op'>$</span><span class='va'>gorepre</span><span class='op'>)</span>

<span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></span><span class='op'>(</span><span class='va'>usa</span>, promgorepost <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>gorepst</span>, na.rm <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>  promgorepost
1     21.76172</code></pre>
</div>
<p>Otro ejemplo:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></span><span class='op'>(</span><span class='va'>usa</span>,media_edad<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>edad</span>, na.rm<span class='op'>=</span><span class='cn'>T</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fl'>10</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>  media_edad
1   47.20634</code></pre>
</div>
<p><strong>group_by</strong>: Este comando nso sirve para agrupar datos.
Agrupa diferentes observaciones de manera que la base de datos original
no cambie.</p>
<p><em>Ejemplo</em>: Aca le estamos indicando a R que agrupe la data en
base a posición política de los encuestados, además usaremos summarise
para sacar el promedio de la aprobación de Bush post gestión.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>usa</span><span class='op'>$</span><span class='va'>gbushpst</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>as.numeric</a></span><span class='op'>(</span><span class='va'>usa</span><span class='op'>$</span><span class='va'>gbushpst</span><span class='op'>)</span>
<span class='va'>usa.g</span> <span class='op'>&lt;-</span> <span class='va'>usa</span><span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>.</span>, <span class='va'>consipol</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></span><span class='op'>(</span>mean <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>gbushpst</span>,na.rm<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>, n <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/context.html'>n</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fl'>10</span><span class='op'>)</span>

<span class='va'>usa.g</span>
</code></pre>
</div>
<pre><code># A tibble: 8 × 3
  consipol             mean     n
  &lt;fct&gt;               &lt;dbl&gt; &lt;int&gt;
1 1. Muy liberal       11.8    82
2 2. Liberal           15.3   158
3 3. Algo liberal      17.7   351
4 4. Moderado          20.1   109
5 5. Algo conservador  22.2   528
6 6. Conservador       25.8   250
7 7. Muy Conservador   29.1   145
8 &lt;NA&gt;                 18.7   184</code></pre>
</div>
<p><strong>count</strong>: Con este comando podemos contar los casos en
base a una variable.</p>
<p><em>Ejemplo</em>: Le estamos indicando al R que cuente los casos de
las personas de acuerdo al nivel educativo</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://dplyr.tidyverse.org/reference/count.html'>count</a></span><span class='op'>(</span><span class='va'>usa</span>, <span class='va'>educ</span>, sort <span class='op'>=</span> <span class='cn'>F</span><span class='op'>)</span><span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fl'>10</span><span class='op'>)</span> <span class='co'>#con SORT=F estamos diciendo que nos ordene los datos de manera descendente </span>
</code></pre>
</div>
<pre><code>                     educ    n
1 1. Menos que Secundaria  180
2  2. Secundaria Completa  519
3   3. Más que secundaria 1101
4                    &lt;NA&gt;    7</code></pre>
</div>
<p>En este ejemplo le estamos pidiendo a R que agrupe las observaciones
de la base de datos “usa” según la variable “consipol” y luego que
cuente según el nivel educativo de forma ascendente.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>usa</span>,<span class='va'>consipol</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/count.html'>count</a></span><span class='op'>(</span><span class='va'>.</span>,<span class='va'>educ</span> <span class='op'>)</span><span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fl'>10</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 10 × 3
# Groups:   consipol [3]
   consipol        educ                        n
   &lt;fct&gt;           &lt;fct&gt;                   &lt;int&gt;
 1 1. Muy liberal  1. Menos que Secundaria     4
 2 1. Muy liberal  2. Secundaria Completa     16
 3 1. Muy liberal  3. Más que secundaria      62
 4 2. Liberal      1. Menos que Secundaria    10
 5 2. Liberal      2. Secundaria Completa     37
 6 2. Liberal      3. Más que secundaria     111
 7 3. Algo liberal 1. Menos que Secundaria    25
 8 3. Algo liberal 2. Secundaria Completa    100
 9 3. Algo liberal 3. Más que secundaria     225
10 3. Algo liberal &lt;NA&gt;                        1</code></pre>
</div>
<p><strong>mutate</strong> : Este comando te permite crear una nueva
variable conservando las ya existentes.</p>
<p><strong>arrange</strong>: Con este comando podemos ordenar los
valores de una variable de forma ascendente o descendente.</p>
<p><em>Ejemplo</em> : En este comando le estamos indicando a R que
queremos crear un data frame y que agreguemos a este la variable difgore
la cual es la diferencia de las variables “gorepst” y “gorepre”. Luego
le estamos pidiendo que ordene a la variable gorepst de forma
descendente y luego le estamos pidiendo que seleccione las variables
“id”, “difgore”, “gorepre”, “gorepst” para mostrar los resultados.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>usagoredesc</span><span class='op'>=</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span><span class='va'>usa</span>, difgore <span class='op'>=</span>  <span class='va'>gorepst</span> <span class='op'>-</span> <span class='va'>gorepre</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/arrange.html'>arrange</a></span><span class='op'>(</span><span class='va'>.</span>, <span class='fu'><a href='https://dplyr.tidyverse.org/reference/desc.html'>desc</a></span><span class='op'>(</span><span class='va'>gorepst</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>.</span>, <span class='va'>id</span>, <span class='va'>difgore</span>, <span class='va'>gorepre</span>, <span class='va'>gorepst</span><span class='op'>)</span>

<span class='co'>#View(usagoredesc) Para corroborar que se agregó la variable</span>
</code></pre>
</div>
</div>
<p>De manera ascendente</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>usagoreasc</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span><span class='va'>usa</span>, difgore <span class='op'>=</span>  <span class='va'>gorepst</span> <span class='op'>-</span> <span class='va'>gorepre</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/arrange.html'>arrange</a></span><span class='op'>(</span><span class='va'>.</span>,<span class='va'>difgore</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>.</span>, <span class='va'>id</span>, <span class='va'>difgore</span>, <span class='va'>gorepre</span>, <span class='va'>gorepst</span><span class='op'>)</span>
<span class='co'>#View(usagoreasc)</span>
</code></pre>
</div>
</div>
<p><strong>Transmute</strong> : Este comando es muy parecido al
anterior. La diferencia es que muestra únicamente la nueva variable
creada (no se agrega a la base de datos).</p>
<p><em>Ejemplos</em>: Le estamos indicando a R que cree un dataframe
llamado “usabush” y que cree una variable llamada “difbush” que sera la
diferencia entre la variable “gbushpst” y “gbushppre”. Luego que ordene
los valores de esta variable de forma descendente.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>usa</span><span class='op'>$</span><span class='va'>gbushpst</span><span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>as.numeric</a></span><span class='op'>(</span><span class='va'>usa</span><span class='op'>$</span><span class='va'>gbushpst</span><span class='op'>)</span>
<span class='va'>usa</span><span class='op'>$</span><span class='va'>gbushpre</span><span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>as.numeric</a></span><span class='op'>(</span><span class='va'>usa</span><span class='op'>$</span><span class='va'>gbushpre</span><span class='op'>)</span>

<span class='va'>usabush</span><span class='op'>=</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>transmute</a></span><span class='op'>(</span><span class='va'>usa</span>, difbush <span class='op'>=</span> <span class='va'>gbushpst</span> <span class='op'>-</span> <span class='va'>gbushpre</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/arrange.html'>arrange</a></span><span class='op'>(</span><span class='va'>.</span>, <span class='fu'><a href='https://dplyr.tidyverse.org/reference/desc.html'>desc</a></span><span class='op'>(</span><span class='va'>difbush</span><span class='op'>)</span><span class='op'>)</span> 
<span class='co'>#View(usabush)</span>
</code></pre>
</div>
</div>
<p><em>merge</em> : Este comando nos eprmite juntar datasets</p>
<p><code>left_join()</code> : Combinar dos datasets y quedarse con las
observaciones de la data de origen. (Tiene # porque al correr el comando
, aparece toda la data en la pagina y toma mucho espacio, usetdes
copienlo sin el #)</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate-joins.html'>left_join</a></span><span class='op'>(</span><span class='va'>usagoreasc</span>, <span class='va'>usagoredesc</span> , by <span class='op'>=</span><span class='st'>'id'</span><span class='op'>)</span><span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fl'>10</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>     id difgore.x gorepre.x gorepst.x difgore.y gorepre.y gorepst.y
1  1489       -45        46         1       -45        46         1
2   191       -36        42         6       -36        42         6
3    37       -34        35         1       -34        35         1
4    25       -32        33         1       -32        33         1
5    71       -32        51        19       -32        51        19
6   137       -32        51        19       -32        51        19
7   387       -32        33         1       -32        33         1
8   847       -32        51        19       -32        51        19
9  1755       -32        33         1       -32        33         1
10  785       -32        42        10       -32        42        10</code></pre>
</div>
<p><code>right_join()</code> : Combinar dos datasets y quedarse con las
observaciones de destino</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate-joins.html'>right_join</a></span><span class='op'>(</span><span class='va'>usagoreasc</span>, <span class='va'>usa</span>, by <span class='op'>=</span> <span class='st'>'id'</span><span class='op'>)</span><span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fl'>10</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>     id difgore gorepre.x gorepst.x          region
1  1489     -45        46         1        4. Oeste
2   191     -36        42         6      1. Noreste
3    37     -34        35         1          3. Sur
4    25     -32        33         1        4. Oeste
5    71     -32        51        19          3. Sur
6   137     -32        51        19          3. Sur
7   387     -32        33         1          3. Sur
8   847     -32        51        19 2. Norte Centro
9  1755     -32        33         1      1. Noreste
10  785     -32        42        10      1. Noreste
              consipol edad intecamp clintpre gorepre.y gbushpre
1           2. Liberal   23 1. Mucho       90        46        1
2  5. Algo conservador   53  3. Poco       75        42       19
3  5. Algo conservador   76  3. Poco       50        35       43
4   7. Muy Conservador   63  3. Poco       50        33       11
5      3. Algo liberal   58  3. Poco       75        51       19
6  5. Algo conservador   57  3. Poco      100        51       20
7      3. Algo liberal   47 1. Mucho       85        33       43
8  5. Algo conservador   45  3. Poco      100        51       43
9          4. Moderado   42  3. Poco       85        33       19
10 5. Algo conservador   40  5. Nada       85        42       19
                      aborto          anonac                    educ
1                4. Permitir Despues de 1965  2. Secundaria Completa
2                4. Permitir    1949 o antes   3. Más que secundaria
3                4. Permitir    1949 o antes   3. Más que secundaria
4  2. Solo caso de violacion    1949 o antes   3. Más que secundaria
5  2. Solo caso de violacion    1949 o antes   3. Más que secundaria
6  2. Solo caso de violacion    1949 o antes   3. Más que secundaria
7                4. Permitir       1950-1965 1. Menos que Secundaria
8   3. Solo en Caso de Salud       1950-1965 1. Menos que Secundaria
9   3. Solo en Caso de Salud       1950-1965  2. Secundaria Completa
10               4. Permitir       1950-1965  2. Secundaria Completa
     sexo ingresos     marital  voto96         quien96 su_ecopas
1  Hombre    29191 5. Solteros No votó            &lt;NA&gt;  2. Igual
2  Hombre     2006   1. Casado    Votó 1. Bill Clinton  2. Igual
3   Mujer    22519    2. Viudo No votó            &lt;NA&gt;   3. Peor
4   Mujer     8013 5. Solteros    Votó            &lt;NA&gt;  2. Igual
5   Mujer    74038   1. Casado    Votó 1. Bill Clinton  2. Igual
6  Hombre    28036 5. Solteros    Votó 1. Bill Clinton  2. Igual
7  Hombre    86838   1. Casado No votó            &lt;NA&gt;  1. Mejor
8   Mujer    90926        &lt;NA&gt; No votó            &lt;NA&gt;      &lt;NA&gt;
9   Mujer     5259   1. Casado    Votó 1. Bill Clinton      &lt;NA&gt;
10 Hombre    30262 5. Solteros    Votó   5. Ross Perot      &lt;NA&gt;
   clintpst gorepst.y gbushpst       relig  voto00      confipol
1        80         1        1        &lt;NA&gt;    Votó 2. Media Baja
2        75         6       10 Protestante    Votó 2. Media Baja
3        50         1       38 Protestante NO votó 3. Media Alta
4         0         1       30        Otro    Votó 2. Media Baja
5        50        19       10 Protestante    Votó       4. Alta
6        50        19       18       Judio    Votó 2. Media Baja
7        50         1       38        Otro    Votó 2. Media Baja
8       100        19        8 Protestante NO votó 2. Media Baja
9        70         1       38    Catolico    Votó       4. Alta
10        0        10       23    Catolico    Votó       1. Baja
   difclint    sex
1       -10 Hombre
2         0 Hombre
3         0  Mujer
4       -50  Mujer
5       -25  Mujer
6       -50 Hombre
7       -35 Hombre
8         0  Mujer
9       -15  Mujer
10      -85 Hombre</code></pre>
</div>
<p>y la misma dinámica con los siguientes comandos:</p>
<p><code>inner_join()</code> : Combinar dos datasets y excluir todas las
columnas(variables) que no coinciden.</p>
<p><code>full_join()</code> : Combinar dos datasets y quedarse con todas
las observaciones, de ambos datasets.</p>
<p><strong>tidyr</strong></p>
<p>Este paquete tiene como función crear “Tidy data”.</p>
<p><em>¿Que es “Tidy data”?</em> Tidy data es aquella data en donde cada
columna es una variable, cada fila es una observación y cada celda es un
solo valor.</p>
<p>Este paquete fue creado para tener a tu data organizada y limpia y
así poder analizarla de la mejor forma usando todas las otras
herramientas.</p>
<p><code>gather()</code> : Este comando te permite emparejar los valores
de dos variables en pares.</p>
<p>Para este ejercicio usaremos una base que esta en el mismo R. El
mismo programa tiene una serie de paquetes y bases de datos que vienen
con el mismo programa.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>mtcarsG</span> <span class='op'>&lt;-</span> <span class='va'>mtcars</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://tidyr.tidyverse.org/reference/gather.html'>gather</a></span><span class='op'>(</span><span class='va'>atributo</span>, <span class='va'>valor</span><span class='op'>)</span>
<span class='co'>#mtcarsG</span>
</code></pre>
</div>
</div>
<p><code>spread()</code> : Este comando te permite volver al estado
anterior.</p>
<p>Para este ejercicio vamos vamos a crear una columna identificadora
que se denomina <code>car</code> y que tiene los nombres de las filas.
Esto lo hacemos para después revertirlo con el comando spread</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>mtcars2</span> <span class='op'>&lt;-</span> <span class='va'>mtcars</span>
<span class='va'>mtcars2</span><span class='op'>$</span><span class='va'>car</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://tibble.tidyverse.org/reference/rownames.html'>rownames</a></span><span class='op'>(</span><span class='va'>mtcars2</span><span class='op'>)</span>
<span class='co'>#mtcars2</span>
</code></pre>
</div>
</div>
<p>Ahora con la función “gather” emparejamos los valores de las
variables atributo y valor y qui</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>mtcarsG</span> <span class='op'>&lt;-</span> <span class='va'>mtcars2</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://tidyr.tidyverse.org/reference/gather.html'>gather</a></span><span class='op'>(</span><span class='va'>atributo</span>, <span class='va'>valor</span>,<span class='op'>-</span><span class='va'>car</span><span class='op'>)</span><span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fl'>10</span><span class='op'>)</span>
<span class='va'>mtcarsG</span>
</code></pre>
</div>
<pre><code>                 car atributo valor
1          Mazda RX4      mpg  21.0
2      Mazda RX4 Wag      mpg  21.0
3         Datsun 710      mpg  22.8
4     Hornet 4 Drive      mpg  21.4
5  Hornet Sportabout      mpg  18.7
6            Valiant      mpg  18.1
7         Duster 360      mpg  14.3
8          Merc 240D      mpg  24.4
9           Merc 230      mpg  22.8
10          Merc 280      mpg  19.2</code></pre>
</div>
<p>y ahora sí podemos revertirlo (gracias a que hay una columna de
identificadores denomiada car)</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>mtcarsSpread</span> <span class='op'>&lt;-</span> <span class='va'>mtcarsG</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://tidyr.tidyverse.org/reference/spread.html'>spread</a></span><span class='op'>(</span>key <span class='op'>=</span> <span class='va'>atributo</span>, value<span class='op'>=</span><span class='va'>valor</span><span class='op'>)</span><span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fl'>10</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>mtcarsSpread</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>                car  mpg
1        Datsun 710 22.8
2        Duster 360 14.3
3    Hornet 4 Drive 21.4
4 Hornet Sportabout 18.7
5         Mazda RX4 21.0
6     Mazda RX4 Wag 21.0</code></pre>
</div>
<p><code>Separate()</code> : Convierte una única columna en múltiples
separando los caracteres que componen a la inicial</p>
<p>Descargamos esta base de datos para el ejercicio. Lo que queremos
lograr es separar la variable location en “lat” y “long”</p>
<p>Busquen la variable en la base de datos apra que vean como esta
codificada.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>df3</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/utils/read.table.html'>read.table</a></span><span class='op'>(</span><span class='st'>"http://gauss.inf.um.es/datos/longlat.txt"</span>, sep<span class='op'>=</span><span class='st'>";"</span>, head<span class='op'>=</span><span class='cn'>T</span><span class='op'>)</span><span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fl'>10</span><span class='op'>)</span>
<span class='va'>df3</span>
</code></pre>
</div>
<pre><code>        Date Time Accident.Type                Location
1 07/01/2012 1630            PD  (39.26699, -76.560642)
2 07/02/2012 1229            PD (39.000549, -76.399312)
3 07/02/2012 1229            PD  (39.00058, -76.399267)
4 07/02/2012  445            PI   (39.26367, -76.56648)
5 07/02/2012  802            PD (39.240862, -76.599017)
6 07/02/2012  832            PD   (39.27022, -76.63926)</code></pre>
</div>
<p>Le quitamos los parentesis a nuestra variable de interes que es
Location</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>df3</span><span class='op'>$</span><span class='va'>Location</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/grep.html'>gsub</a></span><span class='op'>(</span><span class='st'>"[()]"</span>, <span class='st'>""</span>, <span class='va'>df3</span><span class='op'>$</span><span class='va'>Location</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fl'>10</span><span class='op'>)</span>
<span class='va'>df3</span>
</code></pre>
</div>
<pre><code>        Date Time Accident.Type              Location
1 07/01/2012 1630            PD  39.26699, -76.560642
2 07/02/2012 1229            PD 39.000549, -76.399312
3 07/02/2012 1229            PD  39.00058, -76.399267
4 07/02/2012  445            PI   39.26367, -76.56648
5 07/02/2012  802            PD 39.240862, -76.599017
6 07/02/2012  832            PD   39.27022, -76.63926</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://tidyr.tidyverse.org/reference/separate.html'>separate</a></span><span class='op'>(</span><span class='va'>df3</span>, col <span class='op'>=</span> <span class='va'>Location</span>, into <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"lat"</span>,<span class='st'>"long"</span><span class='op'>)</span>, sep <span class='op'>=</span> <span class='st'>","</span><span class='op'>)</span><span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fl'>10</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>        Date Time Accident.Type       lat        long
1 07/01/2012 1630            PD  39.26699  -76.560642
2 07/02/2012 1229            PD 39.000549  -76.399312
3 07/02/2012 1229            PD  39.00058  -76.399267
4 07/02/2012  445            PI  39.26367   -76.56648
5 07/02/2012  802            PD 39.240862  -76.599017
6 07/02/2012  832            PD  39.27022   -76.63926</code></pre>
</div>
<p><code>unite()</code> : unir dos variables en una</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://tidyr.tidyverse.org/reference/unite.html'>unite</a></span><span class='op'>(</span><span class='va'>usa</span>, <span class='va'>nueva_variable</span>, <span class='va'>sexo</span>, <span class='va'>marital</span>, sep<span class='op'>=</span> <span class='st'>"_"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fl'>5</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>    id          region            consipol edad intecamp clintpre
1 1347          3. Sur                &lt;NA&gt;   97  5. Nada       40
2 1226          3. Sur         4. Moderado   96  3. Poco       85
3 1300 2. Norte Centro          2. Liberal   95  5. Nada      100
4 1646 2. Norte Centro 5. Algo conservador   93  3. Poco     &lt;NA&gt;
5  799          3. Sur 5. Algo conservador   93 1. Mucho       85
  gorepre gbushpre                    aborto       anonac
1      29       35         1. Nunca permitir 1949 o antes
2      42       30 2. Solo caso de violacion 1949 o antes
3      42       30 2. Solo caso de violacion 1949 o antes
4      NA       NA               4. Permitir         &lt;NA&gt;
5      29       37               4. Permitir 1949 o antes
                     educ  nueva_variable ingresos  voto96
1 1. Menos que Secundaria Mujer_1. Casado       NA No votó
2 1. Menos que Secundaria  Mujer_2. Viudo    36297    &lt;NA&gt;
3 1. Menos que Secundaria  Mujer_2. Viudo     3856    Votó
4   3. Más que secundaria  Mujer_2. Viudo       NA    Votó
5 1. Menos que Secundaria Hombre_2. Viudo    83308    Votó
          quien96 su_ecopas clintpst gorepst gbushpst       relig
1            &lt;NA&gt;      &lt;NA&gt;     &lt;NA&gt;      NA       NA        Otro
2            &lt;NA&gt;      &lt;NA&gt;       50      19       18 Protestante
3 1. Bill Clinton  1. Mejor     &lt;NA&gt;      NA       NA Protestante
4     3. Bob Dole  2. Igual     &lt;NA&gt;      NA       NA Protestante
5   5. Ross Perot  2. Igual       30      15       38 Protestante
   voto00 confipol difclint    sex
1    &lt;NA&gt;     &lt;NA&gt;       NA  Mujer
2 NO votó     &lt;NA&gt;      -35  Mujer
3    &lt;NA&gt;     &lt;NA&gt;       NA  Mujer
4    Votó     &lt;NA&gt;       NA  Mujer
5    Votó  1. Baja      -55 Hombre</code></pre>
</div>
<div class="sourceCode" id="cb20"><pre
class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom"></div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
